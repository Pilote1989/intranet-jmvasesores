<block start="bloqueEditarVehiculo"/>
<form class="form-horizontal" enctype="multipart/form-data" method="POST" name="crearVehiculo" id="crearVehiculo" action="?do=clientes.procesarDatosBasicos" role="form">
	<!-- <legend>Form</legend> -->
	<fieldset>
		<div class="form-group">
			<label for="placa" class="col-sm-3 control-label no-padding-right">Placa</label>
			<div class="col-sm-9">
				<div class="clearfix">
					<input name="placa" type="text" id="placa" value="{placa}" onKeyPress="return disableEnterKey(event)" placeholder="Placa" class="col-sm-12">
				</div>
			</div>
		</div>
		<div class="form-group">
			<label for="sumaAsegurada" class="col-sm-3 control-label no-padding-right">Suma Asegurada</label>
			<div class="col-sm-9">
				<div class="clearfix">
					<input name="sumaAsegurada" type="text" id="sumaAsegurada" value="{sumaAsegurada}" onKeyPress="return disableEnterKey(event)" placeholder="Suma Asegurada" class="col-sm-12">
				</div>
			</div>
		</div>
		<div class="form-group">
			<label for="tipo" class="col-sm-3 control-label no-padding-right">Tipo</label>
			<div class="col-sm-9">
				<div class="clearfix">
					<select class="col-sm-12 col-xs-12 form-control" name="tipo" id="tipo">
						<option value="1">Auto</option>
						<option value="2">Camioneta Pick Up</option>
						<option value="3">Camioneta Panel</option>
						<option value="4">Camioneta Station Wagon</option>
						<option value="5">Camioneta Rural 4x4</option>
						<option value="6">Camioneta Rural 4x2</option>
						<option value="7">Carreta</option>
						<option value="8">Tracto</option>
						<option value="9">Camion</option>
						<option value="10">Moto</option>
					</select>
				</div>
			</div>
		</div>
		<div class="form-group">
			<label for="anio" class="col-sm-3 control-label no-padding-right">Año</label>
			<div class="col-sm-9">
				<div class="clearfix">
					<select class="col-sm-12 col-xs-12 form-control" name="anio" id="anio">

						{anios}

					</select>
				</div>
			</div>
		</div>
		<div class="form-group">
			<label for="marca" class="col-sm-3 control-label no-padding-right">Marca</label>
			<div class="col-sm-9">
				<div class="clearfix">
					<select class="col-sm-12 col-xs-12 form-control" name="marca" id="marca">

						{marcas}

					</select>
				</div>
			</div>
		</div>
		<div class="form-group" id="selectModelos">
			<label for="modelo" class="col-sm-3 control-label no-padding-right">Modelo</label>
			<div class="col-sm-9">
				<div class="clearfix">
					<select class="col-sm-12 col-xs-12 form-control" name="modelo" id="modelo">

						{modelos}

					</select>
				</div>
			</div>
		</div>
		<div class="form-group">
			<label for="color" class="col-sm-3 control-label no-padding-right">Color</label>
			<div class="col-sm-9">
				<div class="clearfix">
					<input name="color" type="text" id="color" value="{color}" onKeyPress="return disableEnterKey(event)" placeholder="Color" class="col-sm-12">
				</div>
			</div>
		</div>
		<div class="form-group">
			<label for="motor" class="col-sm-3 control-label no-padding-right">N° de Motor</label>
			<div class="col-sm-9">
				<div class="clearfix">
					<input name="motor" type="text" id="motor" value="{motor}" onKeyPress="return disableEnterKey(event)" placeholder="Numero de Motor" class="col-sm-12">
				</div>
			</div>
		</div>
		<div class="form-group">
			<label for="chasis" class="col-sm-3 control-label no-padding-right">N° de Chasis</label>
			<div class="col-sm-9">
				<div class="clearfix">
					<input name="chasis" type="text" id="chasis" value="{chasis}" onKeyPress="return disableEnterKey(event)" placeholder="Numero de Chasis" class="col-sm-12">
				</div>
			</div>
		</div>
		<div class="form-group">
			<label for="endosatario" class="col-sm-3 control-label no-padding-right">Endosatario</label>
			<div class="col-sm-9">
				<div class="clearfix">
					<input name="endosatario" type="text" id="endosatario" value="{endosatario}" onKeyPress="return disableEnterKey(event)" placeholder="Endosatario" class="col-sm-12">
				</div>
			</div>
		</div>
		<div class="form-group">
			<label class="control-label col-xs-12 col-sm-3 no-padding-right">GPS</label>
			<div class="col-xs-12 col-sm-9">
				<div>
					<label>
						<input name="gps" value="1" type="checkbox" class="ace" id="gps" {gps}>
						<span class="lbl"> </span>
					</label>
				</div>
			</div>
		</div>		
		<input type="hidden" name="idPoliza" id="idPoliza" value="{idPoliza}">
		<block start="bloqueIdVehiculo"/>
		<input type="hidden" name="idVehiculo" id="idVehiculo" value="{idVehiculo}">
		<block end="bloqueIdVehiculo"/>
	</fieldset>
	<div class="form-actions center" style="margin-top:0px;">
		<button class="btn btn-sm btn-success" type="button" id="enviarCrearVehiculo" name="enviarCrearVehiculo">
			{accion} <i class="ace-icon fa fa-arrow-right fa-on-right bigger-110"></i>
		</button>
	</div>
</form>
<block end="bloqueEditarVehiculo"/>

<script>
	<block start="creo"/>
		$('#selectModelos').hide();
	<block end="creo"/>
		$(document).ready(function() {
			$('#marca').on('change', function(e) {
				var valueSelected = this.value;
				if (valueSelected != "") {
					$('#modelo').load("/?do=modelos.ver&idMarca=" + valueSelected, function() {
						$('#selectModelos').show(200);
					});
				} else {
					$('#selectModelos').hide(200);
					$('#modelo').load("/?do=modelos.ver");
				}
			}); 
		<block start="edito"/>
			$('#tipo option[value={tipo}]').attr('selected', 'selected');
			$('#marca option[value={idMarca}]').attr('selected', 'selected'); 
		<block end="edito"/>
		});
	$('#crearVehiculo').validate({
		errorElement: 'div',
		errorClass: 'help-block',
		focusInvalid: false,
		rules: {
			placa: {
				required: true,
			},
			sumaAsegurada: {
				required: true,
			},
			anio: {
				required: true,
			},
			tipo: {
				required: true,
			},
		},

		messages: {
			placa: {
				required: "Ingrese la Placa",
			},
			sumaAsegurada: {
				required: "Seleccione la Compania",
			},
			anio: {
				required: "Seleccione el Año",
			},
			tipo: {
				required: "Seleccione el Tipo",
			},
			fechaFin: {
				required: "Escoja la fecha de fin",
			},
		},

		invalidHandler: function(event, validator) { //display error alert on form submit   
			$('.alert-danger', $('.login-form')).show();
		},

		highlight: function(e) {
			$(e).closest('.form-group').removeClass('has-info').addClass('has-error');
		},

		success: function(e) {
			$(e).closest('.form-group').removeClass('has-error').addClass('has-info');
			$(e).remove();

		},

		errorPlacement: function(error, element) {
			if (element.is(':checkbox') || element.is(':radio')) {
				var controls = element.closest('div[class*="col-"]');
				if (controls.find(':checkbox,:radio').length > 1) controls.append(error);
				else error.insertAfter(element.nextAll('.lbl:eq(0)').eq(0));
			} else if (element.is('.select2')) {
				error.insertAfter(element.siblings('[class*="select2-container"]:eq(0)'));
			} else if (element.is('.chosen-select')) {
				error.insertAfter(element.siblings('[class*="chosen-container"]:eq(0)'));
			} else error.insertAfter(element.parent());
		},
	});
	$('#enviarCrearVehiculo').click(function() {
		if ($("#crearVehiculo").valid()) {
			$.ajax({
				type: "POST",
				dataType: "json",
				url: '?do=vehiculos.guardar',
				data: $("#crearVehiculo").serialize(),
				success: function(data) {
					if (data["respuesta"] == "SUCCESS") {
						$("#tabParticulares").html('<div id="progressbar" class="ui-progressbar ui-widget ui-widget-content ui-corner-all progress progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="37"><div class="ui-progressbar-value ui-widget-header ui-corner-left progress-bar progress-bar-success" style="width: 100%;"></div></div>');
						$("#tabParticulares").load('/?do=polizas.verDatosParticulares&idPoliza={idPoliza}');
						actValores();
						$("#dialog-general").dialog("close");
					}
				}
			});
		}
	})
</script>